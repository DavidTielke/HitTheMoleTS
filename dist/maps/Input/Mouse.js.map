{"version":3,"sources":["Input/Mouse.ts"],"names":[],"mappings":";;;IAKA;QAAA;QA2DA,CAAC;QAlDU,kCAAQ,GAAf;YAAA,iBAqBC;YApBG,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,aAAa,IAAI,CAAC,IAAI,CAAC,mBAAmB,CAAC,CAAC,CAAC;gBACnD,MAAM,CAAC;YACX,CAAC;YAED,IAAI,KAAK,GAAG,IAAI,CAAC,mBAAmB,EAAE,CAAC;YAEvC,KAAK,CAAC,OAAO,CAAC,UAAA,CAAC,IAAI,OAAA,CAAC,CAAC,WAAW,GAAG,CAAC,CAAC,QAAQ,CAAC,KAAI,CAAC,aAAa,CAAC,EAA9C,CAA8C,CAAC,CAAC;YACnE,EAAE,CAAC,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC,CAAC;gBACvB,KAAK,CAAC,OAAO,CAAC,UAAA,CAAC,IAAI,OAAA,CAAC,CAAC,WAAW,GAAG,CAAC,CAAC,WAAW,EAA7B,CAA6B,CAAC,CAAC;YACtD,CAAC;YAED,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,mBAAmB,IAAI,IAAI,CAAC,eAAe,CAAC,CAAC,CAAC;gBACpD,KAAK,CAAC,OAAO,CAAC,UAAA,CAAC,IAAI,OAAA,CAAC,CAAC,SAAS,GAAG,CAAC,CAAC,WAAW,EAA3B,CAA2B,CAAC,CAAC;YACpD,CAAC;YACD,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC,CAAC;gBACxB,KAAK,CAAC,OAAO,CAAC,UAAA,CAAC;oBACX,CAAC,CAAC,SAAS,GAAG,KAAK,CAAC;oBACpB,CAAC,CAAC,WAAW,GAAG,KAAK,CAAC;gBAC1B,CAAC,CAAC,CAAC;YACP,CAAC;QACL,CAAC;QAEM,oDAA0B,GAAjC,UAAkC,MAA2B;YACzD,IAAI,CAAC,mBAAmB,GAAG,MAAM,CAAC;QACtC,CAAC;QAEM,iCAAO,GAAd;YAEI,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC,aAAa,CAAC;YAC5C,IAAI,CAAC,mBAAmB,GAAG,IAAI,CAAC,eAAe,CAAC;QACpD,CAAC;QAGD,sBAAW,0CAAa;iBAAxB;gBACI,MAAM,CAAC,IAAI,CAAC,cAAc,CAAC;YAC/B,CAAC;iBACD,UAAyB,KAAY;gBACjC,IAAI,CAAC,cAAc,GAAG,KAAK,CAAC;YAChC,CAAC;;;WAHA;QAKD,sBAAW,4CAAe;iBAA1B;gBACI,MAAM,CAAC,IAAI,CAAC,gBAAgB,CAAC;YACjC,CAAC;iBACD,UAA2B,KAAc;gBACrC,IAAI,CAAC,gBAAgB,GAAG,KAAK,CAAC;gBAC9B,EAAE,CAAC,CAAC,KAAK,KAAK,IAAI,CAAC,CAAC,CAAC;oBACjB,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC,aAAa,CAAC;gBAChD,CAAC;YACL,CAAC;;;WANA;QAOL,sBAAC;IAAD,CA3DA,AA2DC,IAAA;IAED,IAAI,KAAK,GAAG,IAAI,eAAe,EAAE,CAAC;IAEhB,sBAAK","file":"../../scripts/Input/Mouse.js","sourcesContent":["import { Point } from \"../Primitives/primitives.module\";\r\nimport { Game } from \"../Game\";\r\nimport { IInteractable } from \"./IInteractable\";\r\nimport { IInteractableSource } from \"./IInteractableSource\";\r\n\r\nclass MouseController {\r\n    private _mouseButtonDown: boolean;\r\n    private _mousePosition: Point;\r\n    private _wasMouseButtonDown: boolean;\r\n    private _interactableSource: IInteractableSource;\r\n\r\n    public lastMousePosition: Point;\r\n    public mouseDownPosition: Point\r\n\r\n    public updating(): void {\r\n        if (!this.mousePosition || !this._interactableSource) {\r\n            return;\r\n        }\r\n\r\n        let items = this._interactableSource();\r\n\r\n        items.forEach(i => i.isMouseOver = i.contains(this.mousePosition));\r\n        if (this.mouseButtonDown) {\r\n            items.forEach(i => i.isMouseDown = i.isMouseOver);\r\n        }\r\n\r\n        if (!this._wasMouseButtonDown && this.mouseButtonDown) {\r\n            items.forEach(i => i.isDragged = i.isMouseOver);\r\n        }\r\n        if (!this.mouseButtonDown) {\r\n            items.forEach(i => {\r\n                i.isDragged = false;\r\n                i.isMouseDown = false;\r\n            });\r\n        }\r\n    }\r\n\r\n    public registerInteractableSource(source: IInteractableSource): void {\r\n        this._interactableSource = source;\r\n    }\r\n\r\n    public updated(): void {\r\n\r\n        this.lastMousePosition = this.mousePosition;\r\n        this._wasMouseButtonDown = this.mouseButtonDown;\r\n    }\r\n\r\n\r\n    public get mousePosition(): Point {\r\n        return this._mousePosition;\r\n    }\r\n    public set mousePosition(value: Point) {\r\n        this._mousePosition = value;\r\n    }\r\n\r\n    public get mouseButtonDown(): boolean {\r\n        return this._mouseButtonDown;\r\n    }\r\n    public set mouseButtonDown(value: boolean) {\r\n        this._mouseButtonDown = value;\r\n        if (value === true) {\r\n            this.mouseDownPosition = this.mousePosition;\r\n        }\r\n    }\r\n}\r\n\r\nlet mouse = new MouseController();\r\n\r\nexport { mouse as Mouse };"]}